(this.webpackJsonpassets_wfa_widget=this.webpackJsonpassets_wfa_widget||[]).push([[0],{2:function(e,t,a){e.exports={header:"AssetsWaitingForApproval_header__3a1hI",header__buttons:"AssetsWaitingForApproval_header__buttons__3gTwN",header__title:"AssetsWaitingForApproval_header__title__1PeWt",header__placeholder:"AssetsWaitingForApproval_header__placeholder__2dwaX",filters:"AssetsWaitingForApproval_filters__RCH4C","filters__select-all":"AssetsWaitingForApproval_filters__select-all__eMz4O",header__button:"AssetsWaitingForApproval_header__button__3B8AP","header__button--approve":"AssetsWaitingForApproval_header__button--approve__2mby8","header__button--decline":"AssetsWaitingForApproval_header__button--decline__1BOoT",image__container:"AssetsWaitingForApproval_image__container__2w76t","image__hover-layer":"AssetsWaitingForApproval_image__hover-layer__2p_lL","details-button":"AssetsWaitingForApproval_details-button__IGQyV","checkmark-icon":"AssetsWaitingForApproval_checkmark-icon__3mY7d","image--selected":"AssetsWaitingForApproval_image--selected__1LrRC"}},27:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var i=a(1),s=a.n(i),n=a(21),c=a.n(n),r=(a(27),a(12)),l=a(22),o=(a(28),a(11)),d=a.n(o),_=a(2),u=a.n(_),h=a.p+"static/media/checkmark_icon.756b7439.svg",p=a(0),b=function(e){var t=e.image,a=e.clickHandler;return Object(p.jsx)("div",{className:"views-row",children:Object(p.jsxs)("div",{className:"card card-inverse card--media ".concat(u.a.image__container),children:[Object(p.jsx)("img",{src:t.src,width:"500",height:"334",loading:"lazy",className:"card-img img-fluid ".concat(t.selected?u.a["image--selected"]:""),style:{maxWidth:"234.812px",maxHeight:"158.734px"},alt:t.alt}),Object(p.jsxs)("div",{className:u.a["image__hover-layer"],onClick:function(){return a(t)},children:[Object(p.jsx)("img",{src:h,alt:"checkmark icon",className:u.a["checkmark-icon"]}),Object(p.jsx)("button",{className:u.a["details-button"],onClick:function(e){e.preventDefault(),e.stopPropagation(),console.log("Details button clicked")},children:"details"})]})]})})},v=a(50),m=a(51),j=a(52),g=function(e){return e.filter((function(e){return e.selected}))},f=function(e){var t=e.images,a=e.approveHandler,i=e.selectAllHandler;return Object(p.jsx)(v.a,{children:Object(p.jsx)(m.a,{children:Object(p.jsx)(j.a,{children:Object(p.jsxs)("div",{className:u.a.header,children:[Object(p.jsx)("div",{className:u.a.header__title,children:"Assets waiting for approval"}),0!==g(t).length?Object(p.jsxs)("div",{className:u.a.header__buttons,children:[Object(p.jsx)("button",{className:"".concat(u.a.header__button," ").concat(u.a["header__button--approve"]),onClick:function(){return a(!0)},children:"Approve selected items"}),Object(p.jsx)("button",{className:"".concat(u.a.header__button," ").concat(u.a["header__button--decline"]),onClick:function(){return a(!1)},children:"Decline"})]}):Object(p.jsx)("div",{className:u.a.header__placeholder,children:"Please select some assets."}),Object(p.jsx)("div",{className:u.a.filters,children:Object(p.jsx)("button",{className:u.a["filters__select-all"],onClick:i,children:t.every((function(e){return!0===e.selected}))?"Deselect all":"Select all"})})]})})})})},A={username:"admin",password:"123456"},O=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1];Object(i.useEffect)((function(){d.a.get("/jsonapi/media/image?filter[status]=0&include=field_category,field_image,field_keywords,thumbnail",{auth:A}).then((function(e){var t,a=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[],i=[];a.forEach((function(e){var t,a,s,n;i.push({id:(null===e||void 0===e?void 0:e.id)||0,src:(null===e||void 0===e||null===(t=e.thumbnail)||void 0===t||null===(a=t.uri)||void 0===a?void 0:a.url)||"",alt:(null===e||void 0===e||null===(s=e.field_image)||void 0===s||null===(n=s.meta)||void 0===n?void 0:n.alt)||""})})),s(i)})).catch((function(e){console.log(e)}))}),[]);var n=function(e){e.selected=!e.selected,s(Object(r.a)(a))},c=Object(p.jsx)("div",{className:"region region-content",children:Object(p.jsx)("div",{className:"views-element-container",children:Object(p.jsx)("div",{className:"assets-library unpublished-assets-library view-media-library view view-unpublished-assets view-id-unpublished_assets view-display-id-unpublished_assets js-view-dom-id-05c584ebdc7dfcb5a9045db210b02f4d99b6d8382701e8ba198069d9233ab838",children:Object(p.jsx)("div",{className:"view-content",children:a.map((function(e){return Object(p.jsx)(b,{image:e,clickHandler:n},e.id)}))})})})});return Object(p.jsxs)("div",{children:[Object(p.jsx)(f,{images:a,approveHandler:function(e){var t=a.filter((function(e){return e.selected})),i=[];e?t.forEach((function(e){i.push({requestId:""+e.id,uri:"/jsonapi/media/image/"+e.id,action:"update",body:'{"data":{"type":"media--image", "id":"'.concat(e.id,'", "attributes":{"status":"1"}}}'),headers:{Accept:"application/json","Content-Type":"application/vnd.api+json"}})})):t.forEach((function(e){i.push({requestId:""+e.id,uri:"/jsonapi/media/image"+e.id,action:"delete",headers:{Accept:"application/json","Content-Type":"application/vnd.api+json"}})})),d()({url:"http://damopen.docker.localhost:8000/subrequests",method:"post",data:i,headers:{auth:A}})},selectAllHandler:function(){a.every((function(e){return!0===e.selected}))?a.forEach((function(e){e.selected=!1})):a.forEach((function(e){e.selected=!0})),s(Object(r.a)(a))}}),c]})};var x=function(){return Object(p.jsx)(O,{})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(t){var a=t.getCLS,i=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),i(e),s(e),n(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("assets_wfa_widget_root")),w()}},[[48,1,2]]]);
//# sourceMappingURL=main.b8f74f41.chunk.js.map