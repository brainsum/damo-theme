(this.webpackJsonpassets_wfa_widget=this.webpackJsonpassets_wfa_widget||[]).push([[0],{3:function(e,a,t){e.exports={header:"AssetsWaitingForApproval_header__3a1hI",header__buttons:"AssetsWaitingForApproval_header__buttons__3gTwN",header__title:"AssetsWaitingForApproval_header__title__1PeWt",header__placeholder:"AssetsWaitingForApproval_header__placeholder__2dwaX","filters__select-all":"AssetsWaitingForApproval_filters__select-all__eMz4O",header__button:"AssetsWaitingForApproval_header__button__3B8AP","header__button--approve":"AssetsWaitingForApproval_header__button--approve__2mby8",image__container:"AssetsWaitingForApproval_image__container__2w76t","image__hover-layer":"AssetsWaitingForApproval_image__hover-layer__2p_lL","details-button":"AssetsWaitingForApproval_details-button__IGQyV","checkmark-icon":"AssetsWaitingForApproval_checkmark-icon__3mY7d","image--selected":"AssetsWaitingForApproval_image--selected__1LrRC",popover:"AssetsWaitingForApproval_popover__2_Btd",popover__container:"AssetsWaitingForApproval_popover__container__1yydc","close-icon":"AssetsWaitingForApproval_close-icon__3efa4",info__name:"AssetsWaitingForApproval_info__name__16u5O",info__filesize:"AssetsWaitingForApproval_info__filesize__1ak_Z",info__created:"AssetsWaitingForApproval_info__created__3kLVV",info__filename:"AssetsWaitingForApproval_info__filename__2eupY",info__category:"AssetsWaitingForApproval_info__category__3kGyf",info__keywords:"AssetsWaitingForApproval_info__keywords__bxVKk","popover__edit-asset":"AssetsWaitingForApproval_popover__edit-asset__jN5Qb"}},34:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var i=t(2),n=t.n(i),s=t(26),o=t.n(s),c=(t(34),t(14)),r=t.n(c),l=t(27),d=t(16),_=t(12),u=(t(36),t(11)),p=t.n(u),v=t(3),f=t.n(v),h=t.p+"static/media/checkmark_icon.756b7439.svg",m=t.p+"static/media/close_icon.12480dea.svg",j=t(68),b=t(28),g=t(69);function O(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var t=1024,i=a<0?0:a,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(i))+" "+n[s]}var A=t(0);j.a.addDefaultLocale(b);var x=function(e){var a=e.image,t=e.clickHandler,i=e.showImageDetails,n=e.setShowImageDetails;return Object(A.jsxs)("div",{className:"views-row",children:[Object(A.jsxs)("div",{className:"card card-inverse card--media ".concat(f.a.image__container),children:[Object(A.jsx)("img",{src:a.src,loading:"lazy",className:"card-img img-fluid ".concat(a.selected?f.a["image--selected"]:""),alt:a.alt}),Object(A.jsxs)("div",{className:f.a["image__hover-layer"],onClick:function(){return t(a)},children:[Object(A.jsx)("img",{src:h,alt:"checkmark icon",className:f.a["checkmark-icon"]}),Object(A.jsx)("button",{className:f.a["details-button"],onClick:function(e){e.preventDefault(),e.stopPropagation(),n(a.id)},children:"details"})]})]}),i===a.id&&Object(A.jsx)("div",{className:f.a.popover,children:Object(A.jsxs)("div",{className:f.a.popover__container,children:[Object(A.jsx)("div",{className:f.a.popover__close,onClick:function(e){n(-1)},children:Object(A.jsx)("img",{src:m,alt:"close_icon",className:f.a["close-icon"]})}),Object(A.jsxs)("div",{className:f.a.popover__content,children:[Object(A.jsx)("div",{className:f.a.info__name,children:a.name}),Object(A.jsxs)("div",{className:f.a.info__filesize,children:["Filesize: ",O(a.filesize)]}),Object(A.jsxs)("div",{className:f.a.info__created,children:["Created: ",Object(A.jsx)(g.a,{date:new Date(a.created),locale:"en-US"})]}),Object(A.jsxs)("div",{className:f.a.info__filename,children:["File name: ",a.filename]}),Object(A.jsxs)("div",{className:f.a.info__category,children:["Category: ",a.categories.map((function(e){return e.name+""}))]}),Object(A.jsxs)("div",{className:f.a.info__keywords,children:["Keywords: ",a.keywords.map((function(e,a,t){return e.name+(a<t.lenght-1?", ":"")}))]})]}),Object(A.jsx)("button",{className:"".concat(f.a.header__button," ").concat(f.a["popover__edit-asset"]),onClick:function(e){e.preventDefault(),e.stopPropagation(),console.log("Edit asset")},children:"Edit asset"})]})})]})},y=t(65),w=t(66),k=t(67),N=function(e){return e.filter((function(e){return e.selected}))},F=function(e){var a=e.images,t=e.approveHandler,i=e.selectAllHandler,n=e.filterHandler,s=e.showSelectedOnly;return Object(A.jsx)(y.a,{children:Object(A.jsx)(w.a,{children:Object(A.jsx)(k.a,{children:Object(A.jsxs)("div",{className:f.a.header,children:[Object(A.jsx)("div",{className:f.a.header__title,children:"Assets waiting for approval"}),0!==N(a).length?Object(A.jsxs)("div",{className:f.a.header__buttons,children:[Object(A.jsx)("button",{className:"".concat(f.a.header__button," ").concat(f.a["header__button--approve"]),onClick:function(){return t(!0)},children:"Approve selected items"}),Object(A.jsx)("button",{className:"".concat(f.a.header__button),onClick:function(){return t(!1)},children:"Decline"})]}):Object(A.jsx)("div",{className:f.a.header__placeholder,children:"Please select some assets."}),Object(A.jsxs)("div",{className:f.a.filters,children:[Object(A.jsx)("button",{className:f.a["filters__select-all"],onClick:i,children:a.every((function(e){return!0===e.selected}))?"Deselect all":"Select all"}),Object(A.jsxs)("button",{className:f.a["filters__select-all"],onClick:n,children:[!s&&Object(A.jsx)("span",{children:"Show selected only"}),s&&Object(A.jsx)("span",{children:"Show all"})]})]})]})})})})},W={username:"admin",password:"123456"},C=function(){var e=Object(i.useState)([]),a=Object(_.a)(e,2),t=a[0],n=a[1],s=Object(i.useState)(!1),o=Object(_.a)(s,2),c=o[0],u=o[1],v=Object(i.useState)(-1),f=Object(_.a)(v,2),h=f[0],m=f[1];Object(i.useEffect)((function(){p.a.get("/jsonapi/media/image?filter[status]=0&include=field_category,field_image,field_keywords,thumbnail,uid",{auth:W}).then((function(e){var a,t=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)||[],i=[];t.forEach((function(e){var a,t,n,s,o,c,r,l=[];Array.isArray(null===e||void 0===e?void 0:e.field_category)&&(null===e||void 0===e||null===(r=e.field_category)||void 0===r||r.forEach((function(e){l.push({name:e.name})})));var d,_=[];Array.isArray(null===e||void 0===e?void 0:e.field_keywords)&&(null===e||void 0===e||null===(d=e.field_keywords)||void 0===d||d.forEach((function(e){_.push({name:e.name})})));i.push({id:(null===e||void 0===e?void 0:e.id)||0,src:(null===e||void 0===e||null===(a=e.thumbnail)||void 0===a||null===(t=a.uri)||void 0===t?void 0:t.url)||"",alt:(null===e||void 0===e||null===(n=e.field_image)||void 0===n||null===(s=n.meta)||void 0===s?void 0:s.alt)||"",name:(null===e||void 0===e?void 0:e.name)||"",categories:l||[],keywords:_||[],filename:(null===e||void 0===e||null===(o=e.field_image)||void 0===o?void 0:o.filename)||"",filesize:(null===e||void 0===e||null===(c=e.field_image)||void 0===c?void 0:c.filesize)||0,created:(null===e||void 0===e?void 0:e.created)||0})})),n(i)})).catch((function(e){console.log(e)}))}),[]);var j=function(e){e.selected=!e.selected,n(Object(d.a)(t))},b=function(){var e=Object(l.a)(r.a.mark((function e(a){var i,n,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="/subrequests",n=t.filter((function(e){return e.selected})),s=[],e.next=5,p.a.get("/session/token?_format=json",{}).then((function(e){return e.data}));case 5:o=e.sent,a?n.forEach((function(e){s.push({requestId:""+e.id,uri:"/jsonapi/media/image/"+e.id,action:"update",body:'{"data":{"type":"media--image", "id":"'.concat(e.id,'","attributes":{"status":"1"}}}'),headers:{Accept:"application/json","Content-Type":"application/vnd.api+json","X-CSRF-Token":o}})})):n.forEach((function(e){s.push({requestId:""+e.id,uri:"/jsonapi/media/image/"+e.id,action:"delete",body:'{"data":{"type":"media--image", "id":"'.concat(e.id,'"}}'),headers:{Accept:"application/json","Content-Type":"application/vnd.api+json","X-CSRF-Token":o}})})),p.a.post(i,s,{auth:W}).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=t;c&&(g=t.filter((function(e){return e.selected})));var O=Object(A.jsx)("div",{className:"region region-content",children:Object(A.jsx)("div",{className:"views-element-container",children:Object(A.jsx)("div",{className:"assets-library unpublished-assets-library view-media-library view view-unpublished-assets view-id-unpublished_assets view-display-id-unpublished_assets js-view-dom-id-05c584ebdc7dfcb5a9045db210b02f4d99b6d8382701e8ba198069d9233ab838",children:Object(A.jsx)("div",{className:"view-content",children:g.map((function(e){return Object(A.jsx)(x,{image:e,clickHandler:j,showImageDetails:h,setShowImageDetails:m},e.id)}))})})})});return Object(A.jsxs)(A.Fragment,{children:[t.length>0&&Object(A.jsxs)("div",{children:[Object(A.jsx)(F,{images:t,approveHandler:b,selectAllHandler:function(){t.every((function(e){return!0===e.selected}))?t.forEach((function(e){e.selected=!1})):t.forEach((function(e){e.selected=!0})),n(Object(d.a)(t))},filterHandler:function(){u((function(e){return!e}))},showSelectedOnly:c}),O]}),0===t.length&&Object(A.jsx)("div",{children:"No results found."})]})};var S=function(){return Object(A.jsx)(C,{})},B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,70)).then((function(a){var t=a.getCLS,i=a.getFID,n=a.getFCP,s=a.getLCP,o=a.getTTFB;t(e),i(e),n(e),s(e),o(e)}))};o.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(S,{})}),document.getElementById("assets_wfa_widget_root")),B()}},[[59,1,2]]]);
//# sourceMappingURL=main.af9f7941.chunk.js.map